(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{21:function(e,n,t){},40:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var r=t(2),c=t.n(r),a=t(16),i=t.n(a),s=(t(21),t(3)),o=t(4),u=t.n(o),d="/api/persons",b=function(){return u.a.get(d)},j=function(e){return u.a.post(d,e)},h=function(e){return u.a.delete("".concat(d,"/").concat(e))},l=function(e,n){return u.a.put("".concat(d,"/").concat(e),n)},f=(t(40),t(0)),m=function(e){return Object(f.jsxs)("form",{children:[Object(f.jsx)("p",{children:"Filter shown with :"}),Object(f.jsx)("input",{value:e.search,onChange:e.onChange})]})},O=function(e){return setTimeout((function(){e.setMessage(""),e.setError("")}),5e3),""!==e.message?Object(f.jsx)("div",{children:Object(f.jsx)("div",{className:"message",children:e.message})}):""!=e.error?Object(f.jsx)("div",{children:Object(f.jsx)("div",{className:"error",children:e.error})}):Object(f.jsx)("div",{})},p=function(e){return Object(f.jsxs)("form",{onSubmit:e.onSubmit,children:[Object(f.jsxs)("div",{children:[Object(f.jsxs)("div",{children:["name: ",Object(f.jsx)("input",{value:e.newName,onChange:e.handleNameChange})]}),Object(f.jsxs)("div",{children:["number: ",Object(f.jsx)("input",{value:e.newNumber,onChange:e.handleNumberChange})]})]}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{type:"submit",children:"add"})})]})},g=function(e){return Object(f.jsx)("div",{children:e.personToShow.map((function(n){return Object(f.jsxs)("p",{children:[n.name," : ",n.number," ",Object(f.jsx)("button",{type:"submit",onClick:function(){window.confirm("Delete "+n.name+"?")&&h(n.id).then((function(e){return e.data})).then((function(t){return e.setMessage("".concat(n.name," is deleted with success"))}),e.setPersons(e.persons.filter((function(e){return e.id!==n.id})))).catch((function(t){e.setError("An error has been occurred during Deleting "+n.name+" ! Please retry ")}))},children:"delete"})]},n.id)}))})},x=function(){var e=Object(r.useState)([]),n=Object(s.a)(e,2),t=n[0],c=n[1];Object(r.useEffect)((function(){b().then((function(e){c(e.data)}))}),[]);var a=Object(r.useState)(""),i=Object(s.a)(a,2),o=i[0],u=i[1],d=Object(r.useState)(""),h=Object(s.a)(d,2),x=h[0],w=h[1],v=Object(r.useState)(""),C=Object(s.a)(v,2),S=C[0],N=C[1],k=Object(r.useState)(""),y=Object(s.a)(k,2),E=y[0],P=y[1],A=Object(r.useState)(""),M=Object(s.a)(A,2),L=M[0],T=M[1],D=""===S?t:t.filter((function(e){return!0===e.name.toLowerCase().includes(S.toLowerCase())}));return Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"Phonebook"}),Object(f.jsx)(O,{message:E,error:L,setMessage:function(e){return P(e)},setError:function(e){return T(e)}}),Object(f.jsx)(m,{search:S,onChange:function(e){N(e.target.value)}}),Object(f.jsx)("h3",{children:"Add a new"}),Object(f.jsx)(p,{onSubmit:function(e){!function(e){e.preventDefault();var n=0;if(""!==o&&""!==x||(n=-4),t.map((function(e){e.number===x&&0===n&&(n=-1)})),t.map((function(e){e.name.toLowerCase()===o.toLowerCase()&&0===n&&(n=1)})),0===n){var r={name:o,number:x};j(r).then((function(e){return c(t.concat(e.data),P("".concat(r.name," is added with success")),u(""),w(""))})).catch((function(e){T("An error has been occurred during Adding "+o+" ! Please respect the sizes (name>5 and number=10) ")}))}else if(-4===n)window.alert("The name or number is missing");else if(-1===n){var a=x+" is already added to phonebook";window.alert(a)}else if(n>0){var i=o+" is already added to phonebook, do u wanna replace the old number with a new one?";if(window.confirm(i)){var s=t.filter((function(e){if(e.name===o)return e})),d={name:o,number:x,id:s[0].id};l(s[0].id,d).then((function(e){return e.data})).then(c(t.map((function(e){return e.id!==s[0].id?e:d}))),P("Updated "+o)).catch((function(e){T("An error has been occurred during Updating "+o+" ! Please retry ")})),u(""),w("")}}}(e)},newName:o,newNumber:x,handleNameChange:function(e){u(e.target.value)},handleNumberChange:function(e){w(e.target.value)}}),Object(f.jsx)("h2",{children:"Numbers"}),Object(f.jsx)(g,{setMessage:function(e){return P(e)},personToShow:D,persons:t,setPersons:function(e){return c(e)},setError:function(e){return T(e)}})]})};i.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(x,{})}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.19c358c7.chunk.js.map