{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["Url","axios","get","newPerson","post","id","delete","put","Filter","props","value","search","onChange","Notification","setTimeout","setMessage","setError","message","className","error","PersonForm","onSubmit","newName","handleNameChange","newNumber","handleNumberChange","type","Persons","personToShow","map","person","name","number","onClick","window","confirm","personService","then","response","data","setPersons","persons","filter","p","catch","App","useState","useEffect","setNewName","setNewNumber","setSearch","toLowerCase","includes","e","target","event","preventDefault","ensure","personObject","concat","alert","message_toConfirm","myPerson","addPerson","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.19c358c7.chunk.js","sourcesContent":["import axios from 'axios' \r\nconst Url = '/api/persons'\r\n\r\nconst create = (newPerson) => {\r\n    return axios.post(Url, newPerson)\r\n}\r\n\r\nconst getAll = () =>{\r\n    return axios.get(Url)\r\n}\r\n\r\nconst drop = (id) =>{\r\n    return axios.delete(`${Url}/${id}`)\r\n}\r\n\r\nconst update = (id, newPerson) => {\r\n    return axios.put(`${Url}/${id}`, newPerson)\r\n  }\r\n\r\nexport default{\r\n    getAll: getAll,\r\n    create:  create,\r\n    drop: drop,\r\n    update: update\r\n}","import React, { useState } from 'react'\nimport { useEffect } from 'react'\nimport personService from './services/persons.js'\nimport './App.css'\n\nconst Filter = (props) => {\n  return (\n    <form>\n      <p>Filter shown with :</p>\n      <input value={props.search} onChange={props.onChange}></input>\n    </form>\n  )\n}\n\nconst Notification = (props) => {\n  setTimeout(() => {\n    props.setMessage(\"\")\n    props.setError(\"\")\n  }, 5000)\n\n\n  if (props.message !== \"\") {\n    return (\n      <div>\n        <div className='message'>{props.message}</div>\n      </div>\n    )\n  }\n  else if (props.error != \"\") {\n    return (\n      <div>\n        <div className='error'>{props.error}</div>\n      </div>\n    )\n  }\n  else {\n    return (\n      <div></div>\n    )\n  }\n\n}\n\nconst PersonForm = (props) => {\n  return (\n    <form onSubmit={props.onSubmit}>\n      <div>\n        <div>name: <input value={props.newName} onChange={props.handleNameChange} /></div>\n        <div>number: <input value={props.newNumber} onChange={props.handleNumberChange} /></div>\n      </div>\n      <div>\n        <button type=\"submit\" >add</button>\n      </div>\n    </form>\n  )\n}\n\nconst Persons = (props) => {\n\n  return (\n    <div>\n      {props.personToShow.map(person =>\n        <p key={person.id}>{person.name} : {person.number} <button type=\"submit\" onClick={() => {\n          if (window.confirm(\"Delete \" + person.name + \"?\")) {\n            personService.drop(person.id)\n              .then(response => response.data)\n              .then(id =>\n                \n                props.setMessage(`${person.name} is deleted with success`),\n                props.setPersons(props.persons.filter(p => p.id !== person.id))\n              )\n              .catch(error => {\n                props.setError(\"An error has been occurred during Deleting \" + person.name + \" ! Please retry \")\n              })\n          }\n        }}>delete</button></p>\n      )}\n    </div>\n  )\n}\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n\n  useEffect(() => {\n    personService.getAll().then(response => {\n      setPersons(response.data)\n    })\n  }, [])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [search, setSearch] = useState('')\n  const [message, setMessage] = useState('')\n  const [error, setError] = useState('')\n\n  let personToShow = (search === \"\") ? persons : persons.filter(person => person.name.toLowerCase().includes(search.toLowerCase()) === true)\n  \n  const addPerson = (event) => {\n    event.preventDefault()\n    let ensure = 0\n    if (newName === \"\" || newNumber === \"\") { ensure = -4 }\n    persons.map(person => { if (person.number === newNumber && ensure === 0) { ensure = -1 } })\n    persons.map(person => { if (person.name.toLowerCase() === newName.toLowerCase() && ensure === 0) { ensure = 1 } })\n    if (ensure === 0) {\n\n      let personObject = {\n        name: newName,\n        number: newNumber\n      }\n      personService.create(personObject)\n        .then(response => setPersons(persons.concat(response.data),setMessage(`${personObject.name} is added with success`),setNewName(''),\n        setNewNumber('')))\n        // .then(returnedPerson =>\n        //   setNewName(''),\n        //   setNewNumber(''),\n        // )\n        .catch(error => {\n          setError(\"An error has been occurred during Adding \" + newName + \" ! Please respect the sizes (name>5 and number=10) \")\n        })\n        \n        // setPersons(persons.concat(personObject)),\n          // setMessage(`${personObject.name} is added with success`),\n    }\n    else if (ensure === -4) {\n      const message = \"The name or number is missing\"\n      window.alert(message);\n    }\n\n    else if (ensure === -1) {\n      const message = newNumber + \" is already added to phonebook\"\n      window.alert(message);\n    }\n    else if (ensure > 0) {\n      const message_toConfirm = newName + \" is already added to phonebook, do u wanna replace the old number with a new one?\"\n      if (window.confirm(message_toConfirm)) {\n        const myPerson = persons.filter(person => { if (person.name === newName) { return person } })\n        const newPerson = {\n          name: newName,\n          number: newNumber,\n          id: myPerson[0].id\n        }\n        personService.update(myPerson[0].id, newPerson)\n\n          .then(response => response.data)\n          .then(\n            setPersons(persons.map(person => person.id !== myPerson[0].id ? person : newPerson)),\n            setMessage(\"Updated \" + newName),\n          )\n          .catch(error => {\n            setError(\"An error has been occurred during Updating \" + newName + \" ! Please retry \")\n          })\n        setNewName(\"\")\n        setNewNumber(\"\")\n      }\n    }\n\n  }\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n  const handleSearchChange = (event) => {\n\n    setSearch(event.target.value)\n\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n\n      <Notification message={message} error={error} setMessage={(e) => setMessage(e)} setError={(e) => setError(e)} />\n      <Filter search={search} onChange={(e) => { handleSearchChange(e) }} />\n      <h3>Add a new</h3>\n\n      <PersonForm onSubmit={(e) => { addPerson(e) }} newName={newName} newNumber={newNumber}\n        handleNameChange={(e) => { handleNameChange(e) }} handleNumberChange={(e) => { handleNumberChange(e) }}\n      />\n\n\n      <h2>Numbers</h2>\n      <Persons setMessage={(e) => setMessage(e)} personToShow={personToShow} persons={persons} setPersons={(e) => setPersons(e)} setError={(e) => setError(e)}/>\n\n    </div>\n  )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}